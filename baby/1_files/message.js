var _hmt = _hmt || []; !function (a, b) { function c() { var a, b = navigator.userAgent.toLowerCase(); return a = /iphone|ipad|ipod/.test(b) ? "ios" : /android/.test(b) ? "android" : "pc" } function d(a, c, d) { var e = c || ""; if (c && "object" == typeof c) { var f = ""; for (var g in c) f += g + "=" + c[g] + "&"; e = f.substr(0, f.length - 1) } e = e.trim(); var h = b.createElement("script"); h.type = "text/javascript", h.readyState ? h.onreadystatechange = function () { ("complete" == this.readyState || "loaded" == this.readyState) && (d && d(), h.onreadystatechange = h = d = null) } : h.onload = function () { d && d(), h.onload = h = d = null }, h.src = a + (e ? "?" + e : ""), b.getElementsByTagName("head")[0].appendChild(h) } function e(a, c, d) { g && clearTimeout(g); var e = b.getElementById("playSong"); return e || (e = b.createElement("audio"), e.id = "playSong", e.muted = !0, e.loop = !0, b.body.appendChild(e)), 1 === a ? e.src && e.play().catch(console.log) : 0 === a ? e.src && e.pause() : 2 === a ? e.src && (e.paused ? e.play() : e.pause()) : (a && (g = setTimeout(function () { _hmt.push(["_trackEvent", "playFail:" + c, a, "h5Song"]) }, 5e3), e.ontimeupdate = function () { g && (clearTimeout(g), g = null, window.startPlayCallback && window.startPlayCallback()) }, d && d.length > 0 && (e.onerror = function () { e.src = d[0], e.play(), e.onerror = null })), a && (e.src = a), e.play()), e } try { var f = ["kawabody.cn", "kagirl.cn", "cuscuna.cn", "servicewechat.com", "kugou.com"]; if (!location.href.match(f.join("|"))) return !1; var g, h, i, j = function (a, b) { if (i && clearTimeout(i), h || e(), h = a, "play" === b) return e(1); if ("pause" === b) return e(0); if ("toggle" === b) return e(2); i = setTimeout(function () { _hmt.push(["_trackEvent", "interface", "fail", "h5Song"]) }, 5e3); var f = (c(), 400), g = "playSong_" + Math.random().toString().substr(2, 9), j = ["cmd=23", "pid=" + f, "appid=3124", "hash=" + a, "behavior=play", "module=", "h5=1", "cdnBackup=1"].join("&"); d("https://activity.kugou.com/index.php?r=kq_music/transfer&url=" + encodeURIComponent("http://tracker.kgidc.cn/i/v2/?" + j) + "&callback=" + g), window[g] = function (b) { i && clearTimeout(i), 1 == b.status ? (e(b.url, b.fileName, b.backupUrl), _hmt.push(["_trackEvent", "song", "play", "h5Song"])) : (4 === b.status && (b.status = 2), window.playSongFailCallback && window.playSongFailCallback(a, b.status)), window[g] = null } }, k = function (a, b) { a && !b ? location.href = "http://activity.kugou.com/share/weixin_kwwk.html?data=" + encodeURIComponent(JSON.stringify({ cmd: "999", jsonStr: {} })) + "&ackey=CK1350585625600&iid=552" : b && (location.href = "http://activity.kugou.com/share/weixin_kwwk.html?hash=" + b + "&ackey=CK1350585625600&iid=552") }, l = function () { a.parent.postMessage(JSON.stringify({ name: "playCallParent" }), "*") }, m = function (b) { a.parent.postMessage(JSON.stringify({ name: "choiseCallParent", data: { hash: b.hash, id: b.id, name: b.name } }), "*") }, n = function () { a.frames[0].postMessage(JSON.stringify({ name: "closeCallChild" }), b.getElementsByTagName("iframe")[0].src) }; a.parent != a.self ? a.addEventListener("message", function (b) { if (b.source == a.parent) try { if ("string" == typeof b.data) { var c = JSON.parse(b.data); "closeCallChild" == c.name && j(h, "pause") } } catch (d) { } }, !1) : a.addEventListener && a.addEventListener("message", function (b) { if (b.source == a.frames[0]) try { if ("string" == typeof b.data) { var c = JSON.parse(b.data); "playCallParent" == c.name && a.playSongCallback && a.playSongCallback(), "choiseCallParent" == c.name && a.choiceSongCallback && a.choiceSongCallback(c.data) } } catch (d) { } }, !1), a.playSong = j, a.callCloseSearch = n, a.playCallParent = l, a.choiceCallParent = m, a.toSongPage = k } catch (o) { var p = null; if (window.XMLHttpRequest && !window.ActiveXObject) p = new XMLHttpRequest; else if (window.ActiveXObject) try { p = new ActiveXObject("Microsoft.XMLHTTP") } catch (q) { try { p = new ActiveXObject("Msxml2.XMLHTTP") } catch (r) { p = null } } p.open("post", "https://statwww2.kugou.com/node/weblog/jsloger", !0), p.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), p.send(["key=kawaweika_error", "info=" + o.message.toString()].join("&")) } }(window, document), "h5.kugou.com" == location.host ? !function () { var a = document.createElement("script"); a.src = "https://hm.baidu.com/hm.js?cac9f4dfd14aa251f6ae4ddccf178999"; var b = document.getElementsByTagName("script")[0]; b.parentNode.insertBefore(a, b) }() : !function () { var a = document.createElement("script"); a.src = "https://hm.baidu.com/hm.js?8acb41226d5384258eac79bc37ee58ef"; var b = document.getElementsByTagName("script")[0]; b.parentNode.insertBefore(a, b) }();